"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[864],{864:(_e,h,c)=>{c.r(h),c.d(h,{HomePage:()=>pe});var x=c(5861),s=c(2879),w=c(4132),g=c(6895),_=c(3016),C=c(6805),T=c(930),k=c(9841),p=c(4004),I=c(5698),e=c(4650);const S={cardBack:"/assets/images/card_back.png",cardImages:[{path:"/assets/images/animales/cebra.png"},{path:"/assets/images/animales/pantera.png"},{path:"/assets/images/animales/mono.png"}]},H={cardBack:"/assets/images/lupa.png",cardImages:[{path:"/assets/images/herramientas/destornillador.png"},{path:"/assets/images/herramientas/martillo.png"},{path:"/assets/images/herramientas/serrucho.png"},{path:"/assets/images/herramientas/sierra-mecanica.png"},{path:"/assets/images/herramientas/taladro.png"}]},A={cardBack:"/assets/images/signo-de-interrogacion.png",cardImages:[{path:"/assets/images/frutas/cerezas.png"},{path:"/assets/images/frutas/fresa.png"},{path:"/assets/images/frutas/kiwi.png"},{path:"/assets/images/frutas/limon.png"},{path:"/assets/images/frutas/palta.png"},{path:"/assets/images/frutas/pera.png"},{path:"/assets/images/frutas/sandia.png"},{path:"/assets/images/frutas/uvas.png"}]};var b=c(3101);let v=(()=>{class n{constructor(t){this._db=t}getShuffledCards(t){switch(t){case"animales":return this.shuffleArray(this.getCards(S));case"herramientas":return this.shuffleArray(this.getCards(H));case"frutas":return this.shuffleArray(this.getCards(A))}}getCards(t){let i=[];return t.cardImages.forEach((a,r)=>{i.push({id:2*r,image:a.path,revealed:!1,matched:!1,cardBack:t.cardBack}),i.push({id:2*r+1,image:a.path,revealed:!1,matched:!1,cardBack:t.cardBack})}),i}shuffleArray(t){let a,r,i=t.length;for(;0!==i;)r=Math.floor(Math.random()*i),i-=1,a=t[i],t[i]=t[r],t[r]=a;return t}getScores(t){return this._db.collection("mt_scores").doc(t)}uploadScore(t,i,a,r){var f=this;return(0,x.Z)(function*(){let l=f._db.collection("mt_scores").doc(i),P=(yield function U(n,o){const t="object"==typeof o;return new Promise((i,a)=>{let f,r=!1;n.subscribe({next:l=>{f=l,r=!0},error:a,complete:()=>{r?i(f):t?i(o.defaultValue):a(new C.K)}})})}(l.get())).data();return P.scores.push({score:t,difficulty:i,userID:a,userName:r}),l.update(P)})()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(b.ST))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var m=c(3651),M=c(6159);function J(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(e.xi3(2,1,t.timer,"m:"))}}function N(n,o){if(1&n&&(e.ynx(0),e.YNc(1,J,3,4,"span",1),e.BQk()),2&n){const t=o.ngIf;e.xp6(1),e.Q6J("ngIf","0"!==t)}}function L(n,o){if(1&n&&e._UZ(0,"img",10),2&n){const t=e.oxw().$implicit;e.Q6J("src",t.image,e.LSH)}}function Q(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",5),e.NdJ("click",function(){const r=e.CHM(t).$implicit,f=e.oxw();return e.KtG(f.onCardClicked(r))}),e.TgZ(1,"div",6)(2,"div",7),e.YNc(3,L,1,1,"img",8),e.qZA(),e.TgZ(4,"div",9),e._UZ(5,"img",10),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.oxw();e.Tol(6==i.cards.length?"gutter-1":10==i.cards.length?"gutter-2":"gutter-3"),e.ekj("revealed",t.revealed),e.xp6(3),e.Q6J("ngIf",t.revealed||t.matched),e.xp6(2),e.Q6J("src",t.cardBack,e.LSH)}}let B=(()=>{class n{constructor(t,i,a){this.gameService=t,this._auth=i,this._router=a,this.cards=[],this.firstCard=null,this.secondCard=null,this.lockBoard=!1,this.timer=0,this.signingOut=!1,this.difficulty="easy",this.resetted=!1,this.completed=new e.vpe}ngOnInit(){this.startGame()}ngOnChanges(t){(t.difficulty&&!t.difficulty.isFirstChange()||t.resetted&&!t.resetted.isFirstChange())&&this.startGame()}ngOnDestroy(){}startGame(){this.cards=this.gameService.getShuffledCards(this.getCardSetName(this.difficulty)),this.startTimer()}getCardSetName(t){switch(t){case"medium":return"herramientas";case"hard":return"frutas";default:return"animales"}}startTimer(){this.timer=0,this.interval=setInterval(()=>{this.timer+=10},10)}onCardClicked(t){if(!t.revealed&&!t.matched){if(this.lockBoard||t===this.firstCard)return;if(t.revealed=!0,!this.firstCard)return void(this.firstCard=t);this.secondCard=t,this.checkForMatch()}}checkForMatch(){this.firstCard.image===this.secondCard.image?this.disableCards():this.unflipCards()}disableCards(){this.firstCard.matched=!0,this.secondCard.matched=!0,this.resetBoard(),this.cards.every(t=>t.matched)&&this.handleGameEnding()}handleGameEnding(){clearInterval(this.interval),this.completed.emit(this.timer)}unflipCards(){this.lockBoard=!0,setTimeout(()=>{this.firstCard.revealed=!1,this.secondCard.revealed=!1,this.resetBoard()},1e3)}resetBoard(){[this.firstCard,this.secondCard]=[null,null],this.lockBoard=!1}resetGame(){this.cards.forEach(t=>{t.revealed=!1,t.matched=!1}),this.resetBoard()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v),e.Y36(m.e),e.Y36(M.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-game-board"]],inputs:{difficulty:"difficulty",resetted:"resetted"},outputs:{completed:"completed"},standalone:!0,features:[e.TTD,e.jDz],decls:9,vars:9,consts:[[1,"timer","mt-3"],[4,"ngIf"],[2,"margin-left","-0.5px"],[1,"game-board","mt-2"],["class","card",3,"class","revealed","click",4,"ngFor","ngForOf"],[1,"card",3,"click"],[1,"card-inner"],[1,"card-front"],[3,"src",4,"ngIf"],[1,"card-back"],[3,"src"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e.YNc(2,N,2,1,"ng-container",1),e.ALo(3,"date"),e.TgZ(4,"span",2),e._uU(5),e.ALo(6,"date"),e.qZA()()(),e.TgZ(7,"div",3),e.YNc(8,Q,6,6,"div",4),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",e.xi3(3,3,i.timer,"m")),e.xp6(3),e.Oqu(e.xi3(6,6,i.timer,"ss.SS")),e.xp6(3),e.Q6J("ngForOf",i.cards))},dependencies:[s.Pc,g.ez,g.sg,g.O5,g.uU,_.h],styles:["ion-img[_ngcontent-%COMP%]{object-fit:cover;max-height:100%}.content-with-full-height[_ngcontent-%COMP%]{height:100%}.divisor[_ngcontent-%COMP%]{background-color:#ffdd86}.mat-grid-tile[_ngcontent-%COMP%]{border:2px solid #3e3e3e;--background-color: white}.big-margin[_ngcontent-%COMP%]{margin-top:30vw}.big-left-margin[_ngcontent-%COMP%]{margin-left:10vw}div.low-opacity[_ngcontent-%COMP%]{opacity:40%}hr.rounded[_ngcontent-%COMP%]{border-top:8px solid black;border-radius:5px}.on-top[_ngcontent-%COMP%]{z-index:99!important}.filler-img-container[_ngcontent-%COMP%]{margin-top:24vh;padding-left:2vw;padding-right:2vw;opacity:60%}.game-board[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;align-items:center;padding:10px;margin-top:10px}.timer[_ngcontent-%COMP%]{text-align:center}.timer[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:40px}.card[_ngcontent-%COMP%]{perspective:1000px;overflow:hidden;border-style:solid;border-width:3px;border-color:#000;border-radius:20px}.card.revealed[_ngcontent-%COMP%]   .card-inner[_ngcontent-%COMP%]{transform:rotateY(180deg)}.card[_ngcontent-%COMP%]   .card-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;transform-style:preserve-3d;transition:transform .6s}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden;display:flex;flex-wrap:wrap;align-content:center;justify-content:center;flex-direction:column}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]{transform:rotateY(180deg)}.card.gutter-1[_ngcontent-%COMP%]{width:40vw;height:26vh;margin:10px;background:#ffc459}.card.gutter-2[_ngcontent-%COMP%]{width:40vw;height:15vh;margin:8px;padding:23px;background:rgb(222,222,222)}.card.gutter-3[_ngcontent-%COMP%]{width:20vw;height:20vh;margin:6px;padding:5px}.card-back[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%}"]}),n})();const y=["/assets/images/medalla-de-oro.png","/assets/images/medalla-de-plata.png","/assets/images/medalla-de-bronce.png"];var u=c(4006);const F=["highscoresRoot"];function Y(n,o){if(1&n&&e._UZ(0,"img",20),2&n){const t=e.oxw().index,i=e.oxw(3);e.Q6J("src",i.imagenesMedallas[t],e.LSH)}}function G(n,o){if(1&n&&(e.TgZ(0,"h1",21),e._uU(1),e.qZA()),2&n){const t=e.oxw().index;e.xp6(1),e.Oqu(t+1)}}function q(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.score,"m:"))}}function D(n,o){if(1&n&&(e.ynx(0),e.YNc(1,q,3,4,"span",18),e.BQk()),2&n){const t=o.ngIf;e.xp6(1),e.Q6J("ngIf","0"!==t)}}function E(n,o){if(1&n&&(e.TgZ(0,"ion-item",12)(1,"ion-avatar",13),e.YNc(2,Y,1,1,"img",14),e.YNc(3,G,2,1,"h1",15),e.qZA(),e.TgZ(4,"ion-label",16)(5,"h1",17),e.YNc(6,D,2,1,"ng-container",18),e.ALo(7,"date"),e._uU(8),e.ALo(9,"date"),e.qZA()(),e.TgZ(10,"ion-note",19)(11,"h3"),e._uU(12),e.qZA()()()),2&n){const t=o.$implicit,i=o.index;e.xp6(1),e.Akn(i>=3?"background: rebeccapurple;":""),e.xp6(1),e.Q6J("ngIf",i<3),e.xp6(1),e.Q6J("ngIf",i>=3),e.xp6(3),e.Q6J("ngIf",e.xi3(7,9,t.score,"m")),e.xp6(2),e.hij(" ",e.xi3(9,12,t.score,"ss.SS")," "),e.xp6(3),e.Udp("color","darkorange"),e.xp6(1),e.Oqu(t.userName)}}function z(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"ion-list",4),e.YNc(2,E,13,15,"ion-item",5),e.qZA(),e.TgZ(3,"ion-footer")(4,"ion-toolbar",6)(5,"ion-segment",7,8),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.segmentValue=a)}),e.TgZ(7,"ion-segment-button",9)(8,"ion-label"),e._uU(9,"F\xc1CIL"),e.qZA()(),e.TgZ(10,"ion-segment-button",10)(11,"ion-label"),e._uU(12,"NORMAL"),e.qZA()(),e.TgZ(13,"ion-segment-button",11)(14,"ion-label"),e._uU(15,"DIF\xcdCIL"),e.qZA()()()()(),e.BQk()}if(2&n){const t=e.oxw().ngIf,i=e.oxw();e.xp6(1),e.Udp("padding","18px 0px 0px 0px")("background","#222428"),e.Q6J("inset",!1),e.xp6(1),e.Q6J("ngForOf",t[i.segmentValue].slice(0,5)),e.xp6(3),e.Q6J("ngModel",i.segmentValue)}}function V(n,o){if(1&n&&(e.ynx(0),e.YNc(1,z,16,7,"ng-container",2),e.BQk()),2&n){const t=e.oxw(),i=e.MAs(5);e.xp6(1),e.Q6J("ngIf",!t.showLoading)("ngIfElse",i)}}function R(n,o){if(1&n&&(e.TgZ(0,"div",22)(1,"div",23)(2,"h1"),e._uU(3,"Cargando Resultados..."),e.qZA()(),e.TgZ(4,"div",24),e._UZ(5,"ion-progress-bar",25),e.qZA()()),2&n){const t=e.oxw();e.xp6(5),e.Q6J("value",t.loadingProgress)}}let $=(()=>{class n{constructor(t){this.gestureCtrl=t,this.segmentValue="easy",this.imagenesMedallas=y,this.showLoading=!0,this.loadingProgress=0}ngOnInit(){let t=setInterval(()=>{this.loadingProgress+=.01,this.loadingProgress>1.1&&(clearInterval(t),this.showLoading=!1)},20)}ngAfterViewInit(){this.initializeGesture()}initializeGesture(){this.gesture=this.gestureCtrl.create({el:this.highscoresRoot.nativeElement,gestureName:"swipe",threshold:10,onStart:()=>{},onMove:t=>{},onEnd:t=>{console.log(t.deltaX),t.deltaX>50?"medium"===this.segmentValue?this.segmentValue="easy":"hard"===this.segmentValue&&(this.segmentValue="medium"):t.deltaX<-50&&("medium"===this.segmentValue?this.segmentValue="hard":"easy"===this.segmentValue&&(this.segmentValue="medium"))}}),this.gesture.enable()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.TH))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-highscores-list"]],viewQuery:function(t,i){if(1&t&&e.Gf(F,5,e.SBq),2&t){let a;e.iGM(a=e.CRH())&&(i.highscoresRoot=a.first)}},inputs:{highscores$:"highscores$"},standalone:!0,features:[e.jDz],decls:6,vars:4,consts:[["color","dark"],["highscoresRoot",""],[4,"ngIf","ngIfElse"],["loadingBarTemplate",""],["lines","full",3,"inset"],["class","custom-item","color","dark",4,"ngFor","ngForOf"],["color","danger"],[3,"ngModel","ngModelChange"],["segment",""],["value","easy"],["value","medium"],["value","hard"],["color","dark",1,"custom-item"],["aria-hidden","true","slot","start",2,"height","100px","width","100px"],["alt","",3,"src",4,"ngIf"],["style","margin : 0px; text-align : center; padding-top : 19px; font-size : 50px",4,"ngIf"],[2,"padding-left","20px"],[2,"font-size","46px"],[4,"ngIf"],["slot","end",1,"h-100","d-flex","align-items-center"],["alt","",3,"src"],[2,"margin","0px","text-align","center","padding-top","19px","font-size","50px"],[1,"container"],[1,"row","h1","mb-4","ion-text-center"],[1,"row"],["color","warning",3,"value"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ion-content",0,1),e.YNc(2,V,2,2,"ng-container",2),e.ALo(3,"async"),e.YNc(4,R,6,1,"ng-template",null,3,e.W1O),e.qZA()),2&t){const a=e.MAs(5);e.xp6(2),e.Q6J("ngIf",e.lcZ(3,2,i.highscores$))("ngIfElse",a)}},dependencies:[s.Pc,s.BJ,s.W2,s.fr,s.Ie,s.Q$,s.q_,s.uN,s.X7,s.cJ,s.GO,s.sr,s.QI,g.ez,g.sg,g.O5,g.Ov,g.uU,_.h,u.u5,u.JJ,u.On],styles:["ion-item.custom-item[_ngcontent-%COMP%]{height:138px;--border-color: black !important}.container[_ngcontent-%COMP%]{padding:30px;display:flex;flex-direction:column;align-self:center;justify-content:center;height:88%}ion-segment-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:22px}"]}),n})();var K=c(3726);class O{static constructUser(o){if(null!=o)return new K.n(o.email,o.nombre,o.apellido,o.edad,o.dni,o.imagenes,o.isAdmin,o.uid,o.typename)}}let W=(()=>{class n{constructor(t,i){this.auth=t,this._db=i,this.usuarios=this._db.collection("users")}getUsuario(t){return this.usuarios.doc(t).get()}getUsuarios(){return this.usuarios.valueChanges({idField:"uid"})}getCurrentUser(){return O.constructUser(JSON.parse(localStorage.getItem("user")))}getCurrentAuthData(){return O.constructUser(JSON.parse(localStorage.getItem("auth")))}getUserLogs(t){return this._db.collection("logs").doc(t).get()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(m.e),e.LFG(b.ST))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function X(n,o){1&n&&(e.TgZ(0,"div",7),e._UZ(1,"div",8)(2,"div",9),e.qZA())}function j(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-game-board",16),e.NdJ("completed",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.onGameCompleted(a))}),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("difficulty",t.selectedDifficulty)("resetted",t.resetBoard)}}function ee(n,o){if(1&n&&e._UZ(0,"img",34),2&n){const t=e.oxw().index,i=e.oxw(5);e.Q6J("src",i.imagenesMedallas[t],e.LSH)}}function te(n,o){if(1&n&&(e.TgZ(0,"h1",35),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.place)}}function ne(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.score,"m:"))}}function ie(n,o){if(1&n&&(e.ynx(0),e.YNc(1,ne,3,4,"span",33),e.BQk()),2&n){const t=o.ngIf;e.xp6(1),e.Q6J("ngIf","0"!==t)}}function oe(n,o){if(1&n&&(e.TgZ(0,"ion-item",28)(1,"ion-avatar",29),e.YNc(2,ee,1,1,"img",30),e.YNc(3,te,2,1,"h1",31),e.qZA(),e.TgZ(4,"ion-label",32)(5,"h1"),e.YNc(6,ie,2,1,"ng-container",33),e.ALo(7,"date"),e._uU(8),e.ALo(9,"date"),e.qZA()(),e.TgZ(10,"ion-note",26)(11,"h3"),e._uU(12),e.qZA()()()),2&n){const t=o.$implicit,i=o.index;e.Q6J("color",t.isLast?"danger":"primary"),e.xp6(1),e.Akn(i>=3?"background: rebeccapurple;":""),e.xp6(1),e.Q6J("ngIf",i<3),e.xp6(1),e.Q6J("ngIf",i>=3),e.xp6(3),e.Q6J("ngIf",e.xi3(7,8,t.score,"m")),e.xp6(2),e.hij(" ",e.xi3(9,11,t.score,"ss.SS")," "),e.xp6(4),e.Oqu(t.userName)}}function ae(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar",19)(2,"ion-title",20),e._uU(3,"RESULTADOS"),e.qZA()()(),e.TgZ(4,"ion-content",21)(5,"div")(6,"ion-list",22),e.YNc(7,oe,13,14,"ion-item",23),e.qZA()()(),e.TgZ(8,"ion-footer")(9,"ion-toolbar",19)(10,"ion-buttons",24)(11,"ion-button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.onMenuBtnClicked())}),e._uU(12,"Volver al Men\xfa"),e.qZA()(),e.TgZ(13,"ion-buttons",26)(14,"ion-button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.onJugarBtnClicked())}),e._uU(15,"Volver a Jugar"),e.qZA()()()()}if(2&n){const t=e.oxw(4);e.xp6(6),e.Udp("padding","0"),e.Q6J("inset",!0),e.xp6(1),e.Q6J("ngForOf",t.modalHighScores)}}function se(n,o){if(1&n&&(e.TgZ(0,"ion-modal",17,18),e.YNc(2,ae,16,4,"ng-template"),e.qZA()),2&n){const t=e.oxw(3);e.Udp("height",17+8*t.modalHighScores.length+"%"),e.Q6J("isOpen",t.openResultsModal)("presentingElement",t.presentingElement)}}function re(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.YNc(1,j,1,2,"app-game-board",11),e.TgZ(2,"ion-fab",12)(3,"ion-fab-button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handleSingOut())}),e._UZ(4,"ion-icon",14),e.qZA()(),e.YNc(5,se,3,4,"ion-modal",15),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.selectedDifficulty),e.xp6(4),e.Q6J("ngIf",t.openResultsModal)}}function ce(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",43)(2,"div",44)(3,"ion-button",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.selectedDifficulty="easy")}),e._uU(4,"F\xc1CIL"),e.qZA()(),e.TgZ(5,"div",44)(6,"ion-button",46),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.selectedDifficulty="medium")}),e._uU(7,"NORMAL"),e.qZA()(),e.TgZ(8,"div",44)(9,"ion-button",47),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.selectedDifficulty="hard")}),e._uU(10,"DIF\xcdCIL"),e.qZA()()(),e.BQk()}}function le(n,o){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-highscores-list",48),e.qZA()),2&n){const t=e.oxw(3);e.Udp("height","94%"),e.xp6(1),e.Q6J("highscores$",t.highScores$)}}function ge(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"ion-header",36)(1,"ion-toolbar",37)(2,"ion-buttons",24)(3,"ion-button",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onHomeIconClicked())}),e._UZ(4,"ion-icon",39),e.qZA()(),e.TgZ(5,"ion-title",40),e._uU(6),e.qZA(),e.TgZ(7,"ion-buttons",26)(8,"ion-button",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onPodiumIconClicked())}),e._UZ(9,"ion-icon",41),e.qZA(),e.TgZ(10,"ion-button",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handleSingOut())}),e._UZ(11,"ion-icon",14),e.qZA()()()(),e.YNc(12,ce,11,0,"ng-container",5),e.YNc(13,le,2,3,"ng-template",null,42,e.W1O)}if(2&n){const t=e.MAs(14),i=e.oxw(2);e.Q6J("translucent",!0),e.xp6(6),e.hij(" ",i.showHighScoresComponent?"MEJORES PUNTAJES":"MENU PRINCIPAL"," "),e.xp6(6),e.Q6J("ngIf",!i.showHighScoresComponent)("ngIfElse",t)}}function fe(n,o){if(1&n&&(e.ynx(0),e.YNc(1,re,6,2,"ng-container",5),e.YNc(2,ge,15,4,"ng-template",null,10,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.selectedDifficulty)("ngIfElse",t)}}function de(n,o){1&n&&e._UZ(0,"app-spinner",49),2&n&&e.Q6J("optionalMessage","Cerrando Sesi\xf3n")("spinnerType","bubbles")}let pe=(()=>{class n{constructor(t,i,a,r){this._auth=t,this._router=i,this._usersService=a,this._gameService=r,this.signingOut=!1,this.openResultsModal=!1,this.resetBoard=!1,this.modalHighScores=[],this.imagenesMedallas=y,this.presentFireworks=!1,this.showHighScoresComponent=!1}ngOnInit(){this._auth.afAuth.currentUser.then(t=>{(function Z(n,o){const t="object"==typeof o;return new Promise((i,a)=>{const r=new T.Hp({next:f=>{i(f),r.unsubscribe()},error:a,complete:()=>{t?i(o.defaultValue):a(new C.K)}});n.subscribe(r)})})(this._usersService.getUsuario(null==t?void 0:t.uid)).then(i=>{this.user=i.data()})}),this.highScores$=(0,k.a)([this._gameService.getScores("easy").valueChanges().pipe((0,p.U)(t=>t.scores.sort((i,a)=>i.score-a.score))),this._gameService.getScores("medium").valueChanges().pipe((0,p.U)(t=>t.scores.sort((i,a)=>i.score-a.score))),this._gameService.getScores("hard").valueChanges().pipe((0,p.U)(t=>t.scores.sort((i,a)=>i.score-a.score)))]).pipe((0,p.U)(([t,i,a])=>({easy:t,medium:i,hard:a}))),this.presentingElement=document.querySelector(".content-with-full-height")}onGameCompleted(t){this.presentFireworks=!0,this.lastScore={score:t,difficulty:this.selectedDifficulty,userID:this.user.uid},this._gameService.uploadScore(t,this.selectedDifficulty,this.user.uid,this.user.nombre).then(()=>{this.setModalData(),this.presentFireworks=!1})}onMenuBtnClicked(){this.openResultsModal=!1,this.selectedDifficulty=void 0}onJugarBtnClicked(){this.openResultsModal=!1,this.resetBoard=!this.resetBoard}setModalData(){this.highScores$.pipe((0,I.q)(1),(0,p.U)(t=>{const i=t[this.selectedDifficulty].slice(0,5);let a=t[this.selectedDifficulty].findIndex(l=>{var d;return l.score==(null===(d=this.lastScore)||void 0===d?void 0:d.score)&&l.userID==this.lastScore.userID});const r=i.some(l=>l.score==this.lastScore.score&&l.userID===this.lastScore.userID),f=i.map((l,d)=>({...l,isLast:r&&l.score==this.lastScore.score&&l.userID===this.lastScore.userID,place:d+1}));return r||f.push({...this.lastScore,isLast:!0,place:a+1,userName:this.user.nombre}),f})).subscribe(t=>{this.modalHighScores=t,console.log("scores",this.modalHighScores),this.openResultsModal=!0})}handleSingOut(){var t=this;return(0,x.Z)(function*(){t.signingOut=!0,yield setTimeout(()=>{t._auth.SignOut().then(()=>{t._router.navigate(["login"])})},2e3)})()}onHomeIconClicked(){this.showHighScoresComponent=!1}onPodiumIconClicked(){this.showHighScoresComponent=!0}ngOnDestroy(){this.openResultsModal=!1,this.selectedDifficulty=void 0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.e),e.Y36(M.F0),e.Y36(W),e.Y36(v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-home"]],standalone:!0,features:[e.jDz],decls:17,vars:5,consts:[["id","main-content",1,"content-with-full-height"],[1,"sticky"],[1,"bubbles"],[1,"bubble"],["class","pyro",4,"ngIf"],[4,"ngIf","ngIfElse"],["spinner",""],[1,"pyro"],[1,"before"],[1,"after"],["selectDifficultyTemplate",""],[3,"difficulty","resetted","completed",4,"ngIf"],["slot","fixed","vertical","top","horizontal","end"],["color","tertiary",3,"click"],["name","exit-outline","size","large"],[3,"isOpen","presentingElement","height",4,"ngIf"],[3,"difficulty","resetted","completed"],[3,"isOpen","presentingElement"],["resultsModal",""],["color","warning"],[2,"text-align","center","font-weight","bold"],[1,"list-content","d-flex"],["lines","full",3,"inset"],["class","custom-item",3,"color",4,"ngFor","ngForOf"],["slot","start"],["color","secondary","fill","solid",1,"modal-btn",2,"border-radius","0 0 5px",3,"click"],["slot","end"],["color","success","fill","solid",1,"modal-btn",2,"border-radius","0 0 0 5px",3,"click"],[1,"custom-item",3,"color"],["aria-hidden","true","slot","start"],["alt","",3,"src",4,"ngIf"],["style","margin : 0px; text-align : center; padding-top : 2px;",4,"ngIf"],[2,"padding-left","6px"],[4,"ngIf"],["alt","",3,"src"],[2,"margin","0px","text-align","center","padding-top","2px"],[3,"translucent"],["color","tertiary"],[3,"click"],["slot","icon-only","name","home"],[1,"ion-text-center"],["slot","icon-only","name","podium"],["highScoresTemplate",""],[1,"container","d-flex","flex-column","align-items-stretch"],[1,"row","row-special"],["color","success",1,"difficulty",3,"click"],["color","warning",1,"difficulty",3,"click"],["color","danger",1,"difficulty",3,"click"],[3,"highscores$"],[3,"optionalMessage","spinnerType"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ion-content",0)(1,"section",1)(2,"div",2),e._UZ(3,"div",3)(4,"div",3)(5,"div",3)(6,"div",3)(7,"div",3)(8,"div",3)(9,"div",3)(10,"div",3)(11,"div",3)(12,"div",3),e.qZA()(),e.YNc(13,X,3,0,"div",4),e.YNc(14,fe,4,2,"ng-container",5),e.qZA(),e.YNc(15,de,1,2,"ng-template",null,6,e.W1O)),2&t){const a=e.MAs(16);e.Tol(i.openResultsModal?"opacity-60":""),e.xp6(13),e.Q6J("ngIf",i.presentFireworks),e.xp6(1),e.Q6J("ngIf",!i.signingOut)("ngIfElse",a)}},dependencies:[s.Pc,s.BJ,s.YG,s.Sm,s.W2,s.IJ,s.W4,s.fr,s.Gu,s.gu,s.Ie,s.Q$,s.q_,s.uN,s.wd,s.sr,s.ki,w.O,g.ez,g.sg,g.O5,g.uU,_.h,B,$],styles:['.content-with-full-height[_ngcontent-%COMP%]{height:100%}.row-special[_ngcontent-%COMP%]{height:33%;padding:5px}ion-button.difficulty[_ngcontent-%COMP%]{height:100%;padding:3px;font-size:55px}.container[_ngcontent-%COMP%]{padding:20px;height:93%}ion-modal[_ngcontent-%COMP%]{z-index:20002;width:88%;position:absolute;align-self:center;justify-self:center!important;border:black solid 3px;border-radius:10px}ion-modal.height-5[_ngcontent-%COMP%]{height:60%}ion-modal.height-6[_ngcontent-%COMP%]{height:68%}.toolbar-title[_ngcontent-%COMP%]{text-align:center}ion-item.custom-item[_ngcontent-%COMP%]{--border-color: black !important}.list-content[_ngcontent-%COMP%]{--background: midnightblue}.inner-scroll[_ngcontent-%COMP%], .scroll-y[_ngcontent-%COMP%]{display:flex!important;align-items:center;width:100%}.inner-scroll[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%}app-highscores-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:100%}.opacity-60[_ngcontent-%COMP%]{opacity:60%}.modal-btn[_ngcontent-%COMP%]{height:45px;width:160px;font-size:18px;border:grey solid 2px}section[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;display:flex;justify-content:center;gap:2px;flex-wrap:wrap;overflow:hidden}section[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%}.bubbles[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;z-index:0;overflow:hidden;top:0;left:0}.bubble[_ngcontent-%COMP%]{position:absolute;bottom:-100px;width:40px;height:40px;background:#f1f1f1;border-radius:50%;opacity:.5;animation:_ngcontent-%COMP%_rise 10s infinite ease-in}.bubble[_ngcontent-%COMP%]:nth-child(1){width:40px;height:40px;left:10%;animation-duration:8s}.bubble[_ngcontent-%COMP%]:nth-child(2){width:20px;height:20px;left:20%;animation-duration:5s;animation-delay:1s}.bubble[_ngcontent-%COMP%]:nth-child(3){width:50px;height:50px;left:35%;animation-duration:7s;animation-delay:2s}.bubble[_ngcontent-%COMP%]:nth-child(4){width:80px;height:80px;left:50%;animation-duration:11s;animation-delay:0s}.bubble[_ngcontent-%COMP%]:nth-child(5){width:35px;height:35px;left:55%;animation-duration:6s;animation-delay:1s}.bubble[_ngcontent-%COMP%]:nth-child(6){width:45px;height:45px;left:65%;animation-duration:8s;animation-delay:3s}.bubble[_ngcontent-%COMP%]:nth-child(7){width:90px;height:90px;left:70%;animation-duration:12s;animation-delay:2s}.bubble[_ngcontent-%COMP%]:nth-child(8){width:25px;height:25px;left:80%;animation-duration:6s;animation-delay:2s}.bubble[_ngcontent-%COMP%]:nth-child(9){width:15px;height:15px;left:70%;animation-duration:5s;animation-delay:1s}.bubble[_ngcontent-%COMP%]:nth-child(10){width:90px;height:90px;left:25%;animation-duration:10s;animation-delay:4s}@keyframes _ngcontent-%COMP%_rise{0%{bottom:-100px;transform:translate(0)}50%{transform:translate(100px)}to{bottom:1080px;transform:translate(-200px)}}',".pyro[_ngcontent-%COMP%] > .before[_ngcontent-%COMP%], .pyro[_ngcontent-%COMP%] > .after[_ngcontent-%COMP%]{position:absolute;z-index:100;width:5px;height:5px;border-radius:50%;box-shadow:0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff;animation:1s _ngcontent-%COMP%_bang ease-out infinite backwards,1s _ngcontent-%COMP%_gravity ease-in infinite backwards,5s _ngcontent-%COMP%_position linear infinite backwards}.pyro[_ngcontent-%COMP%] > .after[_ngcontent-%COMP%]{animation-delay:1.25s,1.25s,1.25s;animation-duration:1.25s,1.25s,6.25s}@keyframes _ngcontent-%COMP%_bang{to{box-shadow:-247px 45.3333333333px #006fff,147px -296.6666666667px #f07,-19px 54.3333333333px #ff00ea,199px -98.6666666667px #a2ff00,61px -185.6666666667px #fb00ff,80px -377.6666666667px #00ffa6,119px -157.6666666667px #fa0,6px -204.6666666667px #2a00ff,-56px -245.6666666667px #ff1500,185px -184.6666666667px #2f0,1px -19.6666666667px #0f8,-81px 82.3333333333px #0095ff,-144px -265.6666666667px #00a6ff,-119px 49.3333333333px #fb00ff,-175px -315.6666666667px #00ffd5,-179px -316.6666666667px #60f,236px -132.6666666667px #8400ff,-87px -259.6666666667px #d4ff00,-217px 41.3333333333px #40f,194px -17.6666666667px #ff00c3,243px -269.6666666667px #00e1ff,45px -323.6666666667px #aeff00,-116px -277.6666666667px #00ff84,-11px -86.6666666667px #000dff,37px 2.3333333333px #9000ff,-120px -297.6666666667px #ff2600,77px -265.6666666667px #62ff00,-219px 64.3333333333px #ffbf00,176px -164.6666666667px #5e00ff,-138px -400.6666666667px #0df,-133px 10.3333333333px #00ffae,140px -389.6666666667px #0d00ff,151px -323.6666666667px #f08,-54px -403.6666666667px #0091ff,-125px 34.3333333333px #ff5e00,-74px 79.3333333333px #ff0059,-241px -80.6666666667px #9d00ff,137px -278.6666666667px #f01,-164px -221.6666666667px #00fff2,-110px -99.6666666667px #ff00ae,-1px -384.6666666667px #01f,-173px -57.6666666667px #ffd500,3px -345.6666666667px #00ffd5,-108px -210.6666666667px #f05,-169px -203.6666666667px #3cff00,-234px -169.6666666667px #007bff,89px -159.6666666667px #a0f,-113px -196.6666666667px #a2ff00,-93px -104.6666666667px #001eff,-224px -89.6666666667px #00ff26,-133px -327.6666666667px #0f1}}@keyframes _ngcontent-%COMP%_gravity{to{transform:translateY(200px);-moz-transform:translateY(200px);-webkit-transform:translateY(200px);-o-transform:translateY(200px);-ms-transform:translateY(200px);opacity:0}}@keyframes _ngcontent-%COMP%_position{0%,19.9%{margin-top:10%;margin-left:40%}20%,39.9%{margin-top:40%;margin-left:30%}40%,59.9%{margin-top:20%;margin-left:70%}60%,79.9%{margin-top:30%;margin-left:20%}80%,99.9%{margin-top:30%;margin-left:80%}}"]}),n})()}}]);